{% extends "base.html" %}
{% block title %}Timetable Â· {{ timetable.name }}{% endblock %}

{% block content %}
<h2>{{ timetable.name }}</h2>
<p class="text-muted-soft">Auto-generated timetable view</p>

{% if not days or not periods %}
    <p>No timeslots or days configured.</p>
{% else %}
<div class="timetable-wrapper">
    <table class="timetable-table">
        <thead>
            <tr>
                <th>Day / Time</th>
                {% for start, end in periods %}
                    <th>
                        <div class="time-range">
                            {{ start.strftime('%H:%M') }}<br>
                            - {{ end.strftime('%H:%M') }}
                        </div>
                    </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for day_index, day_label in days %}
            <tr>
                <td class="day-label">{{ day_label }}</td>

                {% for p_idx in range(periods|length) %}
                    {% set entry = grid.get((day_index, p_idx)) %}
                    <td class="tt-cell">
                        {% if entry %}
                            <div class="tt-course">
                                {{ entry.subject.code }} {{ entry.subject.name }}
                            </div>
                            <div class="tt-room">
                                {{ entry.room.name }}
                            </div>
                            <div class="tt-faculty">
                                {{ entry.faculty.name }}
                            </div>
                            <div class="tt-section">
                                {{ entry.batch.name }}
                            </div>
                        {% else %}
                            <div class="tt-empty">No Class</div>
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}